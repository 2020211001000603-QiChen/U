# ä¸¥æ ¼æ¶ˆèå®éªŒè¯´æ˜

## ğŸ¯ å®éªŒç›®æ ‡

åˆ›å»ºä¸€ä¸ªæ›´å½»åº•çš„æ¶ˆèå®éªŒï¼Œæµ‹è¯•åˆ›æ–°ç‚¹äºŒå’Œä¸‰åœ¨å…³é—­åŸºç¡€ç»„ä»¶åçš„ç‹¬ç«‹è´¡çŒ®ã€‚

---

## ğŸ“‹ å®éªŒé…ç½®

### å®éªŒåç§°
`no_dual_projection_strict_ablation`

### é…ç½®è¯¦æƒ…

| ç»„ä»¶ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| **åˆ›æ–°ç‚¹ä¸€ï¼ˆåŒæŠ•å½±æœºåˆ¶ï¼‰** | âŒ å…³é—­ | å…³é—­è§†é¢‘å’ŒéŸ³é¢‘åŒæŠ•å½± |
| **åˆ›æ–°ç‚¹äºŒï¼ˆæ–‡æœ¬å¼•å¯¼æ³¨æ„åŠ›ï¼‰** | âœ… å¼€å¯ | å¼€å¯æ–‡æœ¬å¼•å¯¼æ³¨æ„åŠ›å’Œè‡ªæ³¨æ„åŠ› |
| **åˆ›æ–°ç‚¹ä¸‰ï¼ˆæ¸è¿›å¼å­¦ä¹ ï¼‰** | âœ… å¼€å¯ | å¼€å¯æ¸è¿›å¼å­¦ä¹ å’Œèšç±»ä¼˜åŒ– |
| **å¤šå±‚Cross-Attention** | âŒ å…³é—­ | å…³é—­åŸºç¡€çš„å¤šå±‚äº¤å‰æ³¨æ„åŠ› |
| **ç‰¹å¾äº¤äº’å±‚** | âŒ å…³é—­ | å…³é—­Transformerç‰¹å¾äº¤äº’ |
| **é—¨æ§èåˆ** | âŒ å…³é—­ | å…³é—­é—¨æ§èåˆï¼Œä½¿ç”¨ç®€å•æ‹¼æ¥ |

---

## ğŸ”§ ä»£ç ä¿®æ”¹

### 1. æ·»åŠ æ–°å¼€å…³ï¼ˆ`UMC.py`ï¼‰

åœ¨ `__init__` æ–¹æ³•ä¸­æ·»åŠ ï¼š

```python
self.enable_cross_attention = getattr(args, 'enable_cross_attention', True)  # å¤šå±‚Cross-Attentionå¼€å…³
self.enable_feature_interaction = getattr(args, 'enable_feature_interaction', True)  # ç‰¹å¾äº¤äº’å±‚å¼€å…³
```

### 2. ä¿®æ”¹Cross-Attentioné€»è¾‘ï¼ˆ`UMC.py`ï¼‰

```python
if self.enable_cross_attention:
    for layer in self.cross_attn_video_layers:
        x_video, _ = layer(x_video, video_seq_t, video_seq_t)
    for layer in self.cross_attn_audio_layers:
        x_audio, _ = layer(x_audio, audio_seq_t, audio_seq_t)
else:
    # è·³è¿‡Cross-Attentionï¼Œç›´æ¥ä½¿ç”¨åŸå§‹ç‰¹å¾
    x_video = video_seq_t
    x_audio = audio_seq_t
```

### 3. ä¿®æ”¹ç‰¹å¾äº¤äº’é€»è¾‘ï¼ˆ`UMC.py`ï¼‰

```python
if self.enable_feature_interaction:
    interaction_input = torch.stack([text_bert_proj, text_video_enh_pooled, text_audio_enh_pooled], dim=1)
    interaction_input = interaction_input.transpose(0, 1)
    
    interacted_features, _ = self.feature_interaction(interaction_input, interaction_input, interaction_input)
    interacted_features = interacted_features.transpose(0, 1)
    
    # åˆ†ç¦»äº¤äº’åçš„ç‰¹å¾
    text_bert_proj = interacted_features[:, 0]
    text_video_enh_pooled = interacted_features[:, 1]
    text_audio_enh_pooled = interacted_features[:, 2]
# else: è·³è¿‡ç‰¹å¾äº¤äº’ï¼Œç›´æ¥ä½¿ç”¨æ± åŒ–åçš„ç‰¹å¾
```

### 4. é…ç½®æ–‡ä»¶æ·»åŠ ï¼ˆ`configs/umc_MIntRec.py`ï¼‰

```python
elif experiment_name == 'no_dual_projection_strict_ablation':
    config = default_config.copy()
    config.update({
        # åˆ›æ–°ç‚¹ä¸€ï¼šå…³é—­
        'enable_dual_projection': False,
        'enable_video_dual': False,
        'enable_audio_dual': False,
        
        # åˆ›æ–°ç‚¹äºŒï¼šå¼€å¯
        'enable_text_guided_attention': True,
        'enable_self_attention': True,
        'self_attention_layers': 2,
        
        # åˆ›æ–°ç‚¹ä¸‰ï¼šå¼€å¯
        'enable_progressive_learning': True,
        'enable_adaptive_threshold': True,
        'enable_clustering_optimization': True,
        'enable_clustering_loss': True,
        'enable_contrastive_loss': True,
        
        # å…³é—­åŸºç¡€ç»„ä»¶
        'enable_cross_attention': False,
        'enable_feature_interaction': False,
        'enable_gated_fusion': False,
    })
```

---

## ğŸš€ è¿è¡Œæ–¹æ³•

### æ–¹æ³•1ï¼šä½¿ç”¨è„šæœ¬

```bash
sh examples/run_umc.sh
```

### æ–¹æ³•2ï¼šç›´æ¥è¿è¡Œ

```bash
python run.py \
    --dataset MIntRec \
    --ablation_experiment no_dual_projection_strict_ablation \
    --train \
    --save_results \
    --seed 0
```

---

## ğŸ“Š é¢„æœŸç»“æœ

### å¦‚æœåˆ›æ–°ç‚¹äºŒå’Œä¸‰æœ‰è´¡çŒ®

- **æ€§èƒ½åº”è¯¥æ˜æ˜¾å¥½äº**ï¼šå…³é—­æ‰€æœ‰åˆ›æ–°ç‚¹å’ŒåŸºç¡€ç»„ä»¶çš„åŸºçº¿
- **æ€§èƒ½å¯èƒ½ä½äº**ï¼šå®Œæ•´æ¨¡å‹ï¼ˆåŒ…å«æ‰€æœ‰ç»„ä»¶ï¼‰

### å¦‚æœåˆ›æ–°ç‚¹äºŒå’Œä¸‰è´¡çŒ®è¾ƒå°

- **æ€§èƒ½å¯èƒ½æ¥è¿‘**ï¼šå…³é—­æ‰€æœ‰åˆ›æ–°ç‚¹çš„åŸºçº¿
- **è¯´æ˜**ï¼šåˆ›æ–°ç‚¹å¯èƒ½ä¾èµ–äºåŸºç¡€ç»„ä»¶ï¼ˆCross-Attentionç­‰ï¼‰

---

## ğŸ” å®éªŒæ„ä¹‰

### 1. éªŒè¯åˆ›æ–°ç‚¹çš„ç‹¬ç«‹æ€§

æµ‹è¯•åˆ›æ–°ç‚¹äºŒå’Œä¸‰æ˜¯å¦å¯ä»¥åœ¨æ²¡æœ‰åŸºç¡€ç»„ä»¶çš„æƒ…å†µä¸‹ç‹¬ç«‹å·¥ä½œã€‚

### 2. è¯„ä¼°åŸºç¡€ç»„ä»¶çš„è´¡çŒ®

é€šè¿‡å…³é—­åŸºç¡€ç»„ä»¶ï¼Œå¯ä»¥æ›´æ¸…æ¥šåœ°çœ‹åˆ°ï¼š
- Cross-Attentionçš„è´¡çŒ®
- ç‰¹å¾äº¤äº’å±‚çš„è´¡çŒ®
- é—¨æ§èåˆçš„è´¡çŒ®

### 3. æ›´å½»åº•çš„æ¶ˆè

ç›¸æ¯”ä¹‹å‰çš„æ¶ˆèå®éªŒï¼Œè¿™æ¬¡å…³é—­äº†æ›´å¤šåŸºç¡€ç»„ä»¶ï¼Œå¯ä»¥æ›´æ¸…æ¥šåœ°çœ‹åˆ°åˆ›æ–°ç‚¹çš„å®é™…è´¡çŒ®ã€‚

---

## ğŸ“ˆ ç»“æœåˆ†æå»ºè®®

### 1. å¯¹æ¯”å®éªŒ

| å®éªŒ | é…ç½® | é¢„æœŸæ€§èƒ½ |
|------|------|---------|
| **å®Œæ•´æ¨¡å‹** | æ‰€æœ‰ç»„ä»¶å¼€å¯ | æœ€é«˜ |
| **ä¸¥æ ¼æ¶ˆè** | å…³é—­åˆ›æ–°ç‚¹ä¸€+åŸºç¡€ç»„ä»¶ | ä¸­ç­‰ |
| **åŸºçº¿** | å…³é—­æ‰€æœ‰åˆ›æ–°ç‚¹å’ŒåŸºç¡€ç»„ä»¶ | æœ€ä½ |

### 2. æ€§èƒ½æŒ‡æ ‡

å…³æ³¨ä»¥ä¸‹æŒ‡æ ‡ï¼š
- **NMI** (Normalized Mutual Information)
- **ARI** (Adjusted Rand Index)
- **ACC** (Accuracy)
- **FMI** (Fowlkes-Mallows Index)

### 3. åˆ†æè¦ç‚¹

- **å¦‚æœä¸¥æ ¼æ¶ˆèæ€§èƒ½ä»ç„¶å¾ˆå¥½**ï¼š
  - è¯´æ˜åˆ›æ–°ç‚¹äºŒå’Œä¸‰ç¡®å®æœ‰ç‹¬ç«‹è´¡çŒ®
  - æˆ–è€…BERTæ–‡æœ¬ç¼–ç å™¨å¤ªå¼ºï¼Œæ©ç›–äº†å…¶ä»–ç»„ä»¶çš„è´¡çŒ®

- **å¦‚æœä¸¥æ ¼æ¶ˆèæ€§èƒ½æ˜æ˜¾ä¸‹é™**ï¼š
  - è¯´æ˜åˆ›æ–°ç‚¹å¯èƒ½ä¾èµ–äºåŸºç¡€ç»„ä»¶
  - éœ€è¦é‡æ–°è¯„ä¼°åˆ›æ–°ç‚¹çš„è®¾è®¡

---

## ğŸ“ æ³¨æ„äº‹é¡¹

### 1. æ–‡æœ¬å¼•å¯¼æ³¨æ„åŠ›çš„è¾“å…¥

å½“å…³é—­Cross-Attentionæ—¶ï¼š
- `x_video = video_seq_t`ï¼ˆåŸå§‹è§†é¢‘ç‰¹å¾ï¼‰
- `x_audio = audio_seq_t`ï¼ˆåŸå§‹éŸ³é¢‘ç‰¹å¾ï¼‰
- æ–‡æœ¬å¼•å¯¼æ³¨æ„åŠ›ä»ç„¶å¯ä»¥ä½¿ç”¨è¿™äº›åŸå§‹ç‰¹å¾

### 2. ç‰¹å¾èåˆæ–¹å¼

å½“å…³é—­é—¨æ§èåˆæ—¶ï¼š
- ä½¿ç”¨ç®€å•æ‹¼æ¥ï¼š`torch.cat([text, video, audio], dim=-1)`
- ç„¶åé€šè¿‡ `fusion_layer` æŠ•å½±å› `base_dim` ç»´åº¦

### 3. å¯¹æ¯”å­¦ä¹ æŸå¤±

å¯¹æ¯”å­¦ä¹ æŸå¤±ä»ç„¶å¯ç”¨ï¼Œè¿™å¯èƒ½ï¼š
- âœ… æä¾›å¼ºå¤§çš„å­¦ä¹ ä¿¡å·
- âš ï¸ å¯èƒ½æ©ç›–åˆ›æ–°ç‚¹çš„è´¡çŒ®

---

## ğŸ¯ ä¸‹ä¸€æ­¥

### å¦‚æœæ€§èƒ½ä»ç„¶å¾ˆå¥½

å¯ä»¥è€ƒè™‘ï¼š
1. å…³é—­å¯¹æ¯”å­¦ä¹ æŸå¤±
2. åªä½¿ç”¨BERTæ–‡æœ¬ç‰¹å¾
3. æ›´å½»åº•çš„åŸºçº¿å®éªŒ

### å¦‚æœæ€§èƒ½æ˜æ˜¾ä¸‹é™

è¯´æ˜ï¼š
1. åˆ›æ–°ç‚¹å¯èƒ½ä¾èµ–äºåŸºç¡€ç»„ä»¶
2. éœ€è¦é‡æ–°è®¾è®¡æˆ–è¯„ä¼°åˆ›æ–°ç‚¹

---

## âœ… æ€»ç»“

è¿™ä¸ªä¸¥æ ¼æ¶ˆèå®éªŒå¯ä»¥ï¼š
- âœ… æ›´æ¸…æ¥šåœ°çœ‹åˆ°åˆ›æ–°ç‚¹äºŒå’Œä¸‰çš„ç‹¬ç«‹è´¡çŒ®
- âœ… è¯„ä¼°åŸºç¡€ç»„ä»¶çš„è´¡çŒ®
- âœ… éªŒè¯åˆ›æ–°ç‚¹çš„ç‹¬ç«‹æ€§

**å®éªŒé…ç½®å·²å°±ç»ªï¼Œå¯ä»¥ç›´æ¥è¿è¡Œï¼**








