# ç£ç›˜ç©ºé—´ä¸è¶³è§£å†³æ–¹æ¡ˆ

## âŒ é”™è¯¯ä¿¡æ¯

```
OSError: [Errno 28] No space left on device
RuntimeError: [enforce fail at inline_container.cc:274] . unexpected pos 405059712 vs 405059600
```

**åŸå› **ï¼šç£ç›˜ç©ºé—´ä¸è¶³ï¼Œæ— æ³•ä¿å­˜æ¨¡å‹æ–‡ä»¶ã€‚

---

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šç§»é™¤æ¨¡å‹ä¿å­˜ï¼ˆæ¨èï¼Œå·²ä¿®æ”¹ï¼‰

**å·²ä¿®æ”¹**ï¼šä» `examples/run_umc.sh` ä¸­ç§»é™¤äº† `--save_model` å‚æ•°

**ä¿®æ”¹å†…å®¹**ï¼š
```bash
# ä¿®æ”¹å‰
--train \
--tune \
--save_model \      # â† å·²ç§»é™¤
--save_results \

# ä¿®æ”¹å
--train \
--tune \
--save_results \    # åªä¿å­˜ç»“æœï¼Œä¸ä¿å­˜æ¨¡å‹
```

**ä¼˜ç‚¹**ï¼š
- âœ… èŠ‚çœå¤§é‡ç£ç›˜ç©ºé—´ï¼ˆæ¯ä¸ªæ¨¡å‹æ–‡ä»¶å¯èƒ½å‡ ç™¾MBåˆ°å‡ GBï¼‰
- âœ… ä»ç„¶å¯ä»¥ä¿å­˜å®éªŒç»“æœï¼ˆNMI, ARI, ACCç­‰ï¼‰
- âœ… å¯ä»¥æ­£å¸¸å®Œæˆå®éªŒ

**æ³¨æ„**ï¼š
- æ¨¡å‹ä¸ä¼šè¢«ä¿å­˜ï¼Œæ— æ³•ç”¨äºåç»­æ¨ç†
- å¦‚æœéœ€è¦æ¨¡å‹ï¼Œå¯ä»¥åç»­å•ç‹¬è¿è¡Œä¿å­˜

---

### æ–¹æ¡ˆ2ï¼šæ¸…ç†ç£ç›˜ç©ºé—´

#### 2.1 æ£€æŸ¥ç£ç›˜ä½¿ç”¨æƒ…å†µ

```bash
# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ
df -h

# æŸ¥çœ‹å½“å‰ç›®å½•å ç”¨ç©ºé—´
du -sh *

# æŸ¥çœ‹outputsç›®å½•å ç”¨ç©ºé—´
du -sh outputs/*
```

#### 2.2 æ¸…ç†ä¸éœ€è¦çš„æ–‡ä»¶

```bash
# åˆ é™¤æ—§çš„æ¨¡å‹æ–‡ä»¶ï¼ˆä¿ç•™æœ€è¿‘7å¤©çš„ï¼‰
find outputs -name "pytorch_model.bin" -mtime +7 -delete

# åˆ é™¤æ—§çš„æ—¥å¿—æ–‡ä»¶
find logs -name "*.log" -mtime +7 -delete

# åˆ é™¤æ—§çš„å®éªŒç»“æœï¼ˆå¦‚æœä¸éœ€è¦ï¼‰
find outputs -name "*.csv" -mtime +30 -delete
```

#### 2.3 æ¸…ç†Pythonç¼“å­˜

```bash
# æ¸…ç†Pythonç¼“å­˜æ–‡ä»¶
find . -type d -name "__pycache__" -exec rm -r {} +
find . -name "*.pyc" -delete
find . -name "*.pyo" -delete
```

#### 2.4 æ¸…ç†condaç¼“å­˜

```bash
conda clean --all
```

---

### æ–¹æ¡ˆ3ï¼šä¿®æ”¹ä¿å­˜è·¯å¾„åˆ°å…¶ä»–ç£ç›˜

å¦‚æœç³»ç»Ÿæœ‰å…¶ä»–ç£ç›˜æœ‰æ›´å¤šç©ºé—´ï¼š

```bash
python run.py \
    --dataset MIntRec \
    --ablation_experiment only_innovation1 \
    --train \
    --save_model \
    --output_path "/path/to/larger/disk/outputs" \
    --save_results
```

---

### æ–¹æ¡ˆ4ï¼šåªä¿å­˜å…³é”®å®éªŒçš„æ¨¡å‹

å¦‚æœåªéœ€è¦ä¿å­˜éƒ¨åˆ†å®éªŒçš„æ¨¡å‹ï¼š

```bash
# åªä¿å­˜seed=0çš„æ¨¡å‹
for seed in 0 1 2 3 4; do
    if [ $seed -eq 0 ]; then
        SAVE_MODEL_FLAG="--save_model"
    else
        SAVE_MODEL_FLAG=""
    fi
    
    python run.py \
        --dataset MIntRec \
        --ablation_experiment only_innovation1 \
        --seed $seed \
        --train \
        $SAVE_MODEL_FLAG \
        --save_results
done
```

---

## ğŸ“Š æ–‡ä»¶å¤§å°å‚è€ƒ

### æ¨¡å‹æ–‡ä»¶å¤§å°

| ç»„ä»¶ | å¤§å°ï¼ˆä¼°ç®—ï¼‰ |
|------|------------|
| é¢„è®­ç»ƒæ¨¡å‹ | ~200-500 MB |
| ä¸»è®­ç»ƒæ¨¡å‹ | ~200-500 MB |
| **æ€»è®¡ï¼ˆæ¯ä¸ªå®éªŒï¼‰** | **~400-1000 MB** |

### 5æ¬¡è¿è¡Œï¼ˆ5ä¸ªseedï¼‰

- å¦‚æœä¿å­˜æ‰€æœ‰æ¨¡å‹ï¼š**2-5 GB**
- å¦‚æœåªä¿å­˜ç»“æœï¼š**< 10 MB**

---

## ğŸ¯ æ¨èæ–¹æ¡ˆ

### å¯¹äºæ¶ˆèå®éªŒï¼ˆæ¨èï¼‰

**ä¸ä¿å­˜æ¨¡å‹ï¼Œåªä¿å­˜ç»“æœ**ï¼š
```bash
python run.py \
    --dataset MIntRec \
    --ablation_experiment only_innovation1 \
    --train \
    --save_results  # åªä¿å­˜ç»“æœ
```

**ä¼˜ç‚¹**ï¼š
- âœ… èŠ‚çœå¤§é‡ç©ºé—´
- âœ… å¯ä»¥å®Œæˆæ‰€æœ‰å®éªŒ
- âœ… ç»“æœæ–‡ä»¶å¾ˆå°ï¼ˆå‡ KBåˆ°å‡ MBï¼‰

### å¯¹äºé‡è¦å®éªŒ

**åªä¿å­˜æœ€ä½³seedçš„æ¨¡å‹**ï¼š
```bash
# åªä¿å­˜seed=0çš„æ¨¡å‹
python run.py \
    --dataset MIntRec \
    --ablation_experiment only_innovation1 \
    --seed 0 \
    --train \
    --save_model \
    --save_results
```

---

## ğŸ” æ£€æŸ¥å½“å‰ä¿®æ”¹

### å·²ä¿®æ”¹çš„æ–‡ä»¶

**æ–‡ä»¶**ï¼š`examples/run_umc.sh`

**ä¿®æ”¹**ï¼šç§»é™¤äº† `--save_model` å‚æ•°

**å½“å‰é…ç½®**ï¼š
```bash
--train \
--tune \
--save_results \    # åªä¿å­˜ç»“æœï¼Œä¸ä¿å­˜æ¨¡å‹
```

---

## âœ… éªŒè¯ä¿®æ”¹

è¿è¡Œè„šæœ¬åï¼Œåº”è¯¥ï¼š
- âœ… ä¸å†ä¿å­˜æ¨¡å‹æ–‡ä»¶
- âœ… ä»ç„¶ä¿å­˜å®éªŒç»“æœï¼ˆCSVæ–‡ä»¶ï¼‰
- âœ… ä¸å†å‡ºç°ç£ç›˜ç©ºé—´ä¸è¶³é”™è¯¯

---

## ğŸ“ å¦‚æœéœ€è¦æ¨¡å‹æ€ä¹ˆåŠï¼Ÿ

### æ–¹æ³•1ï¼šå•ç‹¬è¿è¡Œä¿å­˜æ¨¡å‹

å®Œæˆæ‰€æœ‰æ¶ˆèå®éªŒåï¼Œå¦‚æœéœ€è¦æŸä¸ªå®éªŒçš„æ¨¡å‹ï¼Œå¯ä»¥å•ç‹¬è¿è¡Œï¼š

```bash
# åªè¿è¡Œseed=0ï¼Œä¿å­˜æ¨¡å‹
python run.py \
    --dataset MIntRec \
    --ablation_experiment only_innovation1 \
    --seed 0 \
    --train \
    --save_model \
    --save_results
```

### æ–¹æ³•2ï¼šæ¸…ç†ç©ºé—´åé‡æ–°è¿è¡Œ

1. æ¸…ç†ç£ç›˜ç©ºé—´
2. é‡æ–°è¿è¡Œéœ€è¦ä¿å­˜æ¨¡å‹çš„å®éªŒ

---

## ğŸš€ ç°åœ¨å¯ä»¥è¿è¡Œäº†

ä¿®æ”¹å·²å®Œæˆï¼Œç°åœ¨è¿è¡Œï¼š

```bash
sh examples/run_umc.sh
```

åº”è¯¥ä¸ä¼šå†å‡ºç°ç£ç›˜ç©ºé—´ä¸è¶³çš„é”™è¯¯ã€‚

---

## ğŸ“Š ç£ç›˜ç©ºé—´ç®¡ç†å»ºè®®

### å®šæœŸæ¸…ç†

```bash
# åˆ›å»ºæ¸…ç†è„šæœ¬ cleanup.sh
#!/bin/bash

# åˆ é™¤30å¤©å‰çš„æ¨¡å‹æ–‡ä»¶
find outputs -name "pytorch_model.bin" -mtime +30 -delete

# åˆ é™¤30å¤©å‰çš„æ—¥å¿—æ–‡ä»¶
find logs -name "*.log" -mtime +30 -delete

# åˆ é™¤Pythonç¼“å­˜
find . -type d -name "__pycache__" -exec rm -r {} +

echo "æ¸…ç†å®Œæˆï¼"
```

è¿è¡Œï¼š
```bash
chmod +x cleanup.sh
./cleanup.sh
```

---

**æ€»ç»“**ï¼šå·²ç§»é™¤ `--save_model` å‚æ•°ï¼Œç°åœ¨åªä¿å­˜å®éªŒç»“æœï¼Œä¸ä¼šä¿å­˜æ¨¡å‹æ–‡ä»¶ï¼Œå¯ä»¥èŠ‚çœå¤§é‡ç£ç›˜ç©ºé—´ã€‚








