# å•ä¸ªæ¶ˆèå®éªŒæŸ¥çœ‹å’Œé€‰æ‹©æŒ‡å—

## ğŸ“ åœ¨å“ªé‡ŒæŸ¥çœ‹å¯ç”¨çš„æ¶ˆèå®éªŒï¼Ÿ

### æ–¹æ³•1ï¼šæŸ¥çœ‹é…ç½®æ–‡ä»¶ï¼ˆæ¨èï¼‰

**æ–‡ä»¶ä½ç½®**ï¼š`configs/umc_MIntRec.py`  
**æŸ¥çœ‹ä½ç½®**ï¼šç¬¬ 147-209 è¡Œçš„ `_get_ablation_config()` æ–¹æ³•

```python
# åœ¨ _get_ablation_config() æ–¹æ³•ä¸­å¯ä»¥çœ‹åˆ°æ‰€æœ‰å·²å®šä¹‰çš„å®éªŒ
if experiment_name == 'full_confede':
    # ...
elif experiment_name == 'no_dual_projection':
    # ...
elif experiment_name == 'no_clustering_loss':
    # ...
elif experiment_name == 'no_progressive_learning':
    # ...
```

### æ–¹æ³•2ï¼šæŸ¥çœ‹ run.py çš„å¸®åŠ©ä¿¡æ¯

è¿è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„æ¶ˆèå®éªŒï¼š

```bash
python run.py --help | grep ablation_experiment
```

æˆ–è€…åœ¨ `run.py` ç¬¬ 73-74 è¡Œå¯ä»¥çœ‹åˆ°ï¼š

```python
parser.add_argument("--ablation_experiment", type=str, default=None, 
                   help="æ¶ˆèå®éªŒåç§°ï¼Œå¯é€‰: baseline_traditional, confede_only, no_dual_projection, ...")
```

### æ–¹æ³•3ï¼šæŸ¥çœ‹æ–‡æ¡£

**æ–‡ä»¶**ï¼š`ABLATION_EXPERIMENTS_README.md`  
**ä½ç½®**ï¼šç¬¬ 23-73 è¡Œåˆ—å‡ºäº†æ‰€æœ‰å®éªŒç»„å’Œå®éªŒåç§°

---

## ğŸ“‹ å½“å‰å¯ç”¨çš„æ¶ˆèå®éªŒåˆ—è¡¨

### åœ¨ `configs/umc_MIntRec.py` ä¸­å·²å®šä¹‰çš„å®éªŒ

| å®éªŒåç§° | è¯´æ˜ | çŠ¶æ€ |
|---------|------|------|
| `no_dual_projection` | ç¦ç”¨åŒæŠ•å½±æœºåˆ¶ | âœ… å·²å®šä¹‰ |
| `no_clustering_loss` | ç¦ç”¨èšç±»æŸå¤± | âœ… å·²å®šä¹‰ |
| `no_progressive_learning` | ç¦ç”¨æ¸è¿›å¼å­¦ä¹  | âœ… å·²å®šä¹‰ |
| `full_confede` | å®Œæ•´ConFEDEæœºåˆ¶ | âœ… å·²å®šä¹‰ |

### åœ¨ `run.py` ä¸­åˆ—å‡ºçš„å®éªŒï¼ˆéœ€è¦ç¡®è®¤æ˜¯å¦åœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰ï¼‰

| å®éªŒåç§° | è¯´æ˜ | çŠ¶æ€ |
|---------|------|------|
| `baseline_traditional` | ä¼ ç»Ÿèåˆæ–¹æ³• | âš ï¸ éœ€ç¡®è®¤ |
| `confede_only` | ä»…ConFEDEåŒæŠ•å½± | âš ï¸ éœ€ç¡®è®¤ |
| `text_guided_only` | ä»…æ–‡æœ¬å¼•å¯¼æ³¨æ„åŠ› | âš ï¸ éœ€ç¡®è®¤ |
| `gated_fusion_only` | ä»…é—¨æ§èåˆ | âš ï¸ éœ€ç¡®è®¤ |
| `fixed_strategy` | å›ºå®šç­–ç•¥ | âš ï¸ éœ€ç¡®è®¤ |
| `progressive_only` | ä»…æ¸è¿›ç­–ç•¥ | âš ï¸ éœ€ç¡®è®¤ |
| `enhanced_loss_only` | ä»…å¢å¼ºæŸå¤± | âš ï¸ éœ€ç¡®è®¤ |
| `full_progressive` | å®Œæ•´æ¸è¿›ç­–ç•¥ | âš ï¸ éœ€ç¡®è®¤ |
| `standard_architecture` | æ ‡å‡†æ¶æ„ | âš ï¸ éœ€ç¡®è®¤ |
| `clustering_projector_only` | ä»…èšç±»æŠ•å½±å™¨ | âš ï¸ éœ€ç¡®è®¤ |
| `full_optimized_architecture` | å®Œæ•´ä¼˜åŒ–æ¶æ„ | âš ï¸ éœ€ç¡®è®¤ |
| `only_confede` | ä»…ConFEDEæœºåˆ¶ | âš ï¸ éœ€ç¡®è®¤ |
| `only_progressive` | ä»…æ¸è¿›ç­–ç•¥ | âš ï¸ éœ€ç¡®è®¤ |
| `only_architecture` | ä»…ä¼˜åŒ–æ¶æ„ | âš ï¸ éœ€ç¡®è®¤ |
| `full_umc_model` | å®Œæ•´UMCæ¨¡å‹ | âš ï¸ éœ€ç¡®è®¤ |

---

## ğŸ¯ å¦‚ä½•é€‰æ‹©å•ä¸ªæ¶ˆèå®éªŒï¼Ÿ

### æ­¥éª¤1ï¼šæŸ¥çœ‹å¯ç”¨å®éªŒ

æ‰“å¼€ `configs/umc_MIntRec.py`ï¼ŒæŸ¥çœ‹ç¬¬ 147-209 è¡Œï¼Œæ‰¾åˆ°æ‰€æœ‰ `elif experiment_name == '...'` çš„éƒ¨åˆ†ã€‚

### æ­¥éª¤2ï¼šé€‰æ‹©å®éªŒåç§°

é€‰æ‹©ä¸€ä¸ªå®éªŒåç§°ï¼Œä¾‹å¦‚ï¼š
- `no_dual_projection` - ç¦ç”¨åŒæŠ•å½±
- `no_clustering_loss` - ç¦ç”¨èšç±»æŸå¤±
- `no_progressive_learning` - ç¦ç”¨æ¸è¿›å¼å­¦ä¹ 

### æ­¥éª¤3ï¼šè¿è¡Œå®éªŒ

ä½¿ç”¨é€‰å®šçš„å®éªŒåç§°è¿è¡Œå®éªŒã€‚

---

## ğŸš€ å¦‚ä½•è¿è¡Œå•ä¸ªæ¶ˆèå®éªŒï¼Ÿ

### æ–¹æ³•1ï¼šä½¿ç”¨ run.pyï¼ˆæ¨èï¼‰

```bash
python run.py \
    --dataset MIntRec \
    --data_path 'Datasets' \
    --logger_name umc \
    --multimodal_method umc \
    --method umc \
    --train \
    --tune \
    --save_results \
    --seed 0 \
    --gpu_id '0' \
    --video_feats_path 'swin_feats.pkl' \
    --audio_feats_path 'wavlm_feats.pkl' \
    --text_backbone bert-base-uncased \
    --config_file_name umc_MIntRec \
    --ablation_experiment no_dual_projection \
    --results_file_name "results_no_dual_projection.csv" \
    --output_path "outputs/MIntRec/ablation_no_dual_projection"
```

**å…³é”®å‚æ•°**ï¼š
- `--ablation_experiment no_dual_projection` - **è¿™é‡Œé€‰æ‹©å®éªŒåç§°**

### æ–¹æ³•2ï¼šä½¿ç”¨ run_single_ablation.py

```bash
python run_single_ablation.py \
    --experiment_name no_dual_projection \
    --dataset MIntRec \
    --gpu 0 \
    --seed 0 \
    --train \
    --save_results \
    --output_dir ablation_results
```

**å…³é”®å‚æ•°**ï¼š
- `--experiment_name no_dual_projection` - **è¿™é‡Œé€‰æ‹©å®éªŒåç§°**

---

## ğŸ“ å¿«é€ŸæŸ¥çœ‹è„šæœ¬

åˆ›å»ºä¸€ä¸ªè„šæœ¬æ¥æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„æ¶ˆèå®éªŒï¼š

```python
# check_available_experiments.py
import sys
sys.path.append('.')

from configs.umc_MIntRec import Param

# åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿçš„argså¯¹è±¡
class MockArgs:
    def __init__(self):
        self.ablation_experiment = None

# æŸ¥çœ‹é»˜è®¤é…ç½®
param = Param(MockArgs())
print("="*60)
print("å¯ç”¨çš„æ¶ˆèå®éªŒåˆ—è¡¨")
print("="*60)
print("\nåœ¨ configs/umc_MIntRec.py ä¸­å·²å®šä¹‰çš„å®éªŒï¼š")
print("1. no_dual_projection - ç¦ç”¨åŒæŠ•å½±æœºåˆ¶")
print("2. no_clustering_loss - ç¦ç”¨èšç±»æŸå¤±")
print("3. no_progressive_learning - ç¦ç”¨æ¸è¿›å¼å­¦ä¹ ")
print("4. full_confede - å®Œæ•´ConFEDEæœºåˆ¶")
print("\næ³¨æ„ï¼šå…¶ä»–å®éªŒéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼")
```

è¿è¡Œï¼š
```bash
python check_available_experiments.py
```

---

## ğŸ” å¦‚ä½•ç¡®è®¤å®éªŒæ˜¯å¦å¯ç”¨ï¼Ÿ

### æ–¹æ³•1ï¼šç›´æ¥è¿è¡Œæµ‹è¯•

```bash
# å°è¯•è¿è¡Œä¸€ä¸ªå®éªŒï¼Œå¦‚æœé…ç½®ä¸å­˜åœ¨ä¼šä½¿ç”¨é»˜è®¤é…ç½®
python run.py \
    --dataset MIntRec \
    --ablation_experiment test_experiment \
    --train
```

å¦‚æœå®éªŒåç§°ä¸å­˜åœ¨ï¼Œä¼šä½¿ç”¨é»˜è®¤é…ç½®ï¼ˆæ‰€æœ‰åˆ›æ–°ç‚¹å¯ç”¨ï¼‰ã€‚

### æ–¹æ³•2ï¼šæŸ¥çœ‹é…ç½®æ–‡ä»¶

æ‰“å¼€ `configs/umc_MIntRec.py`ï¼Œæœç´¢å®éªŒåç§°ï¼š

```bash
# åœ¨Linux/Macä¸Š
grep -n "experiment_name == " configs/umc_MIntRec.py

# åœ¨Windows PowerShellä¸Š
Select-String -Pattern "experiment_name == " configs/umc_MIntRec.py
```

---

## ğŸ“Š å®Œæ•´çš„å®éªŒé€‰æ‹©æµç¨‹

### 1. æŸ¥çœ‹å¯ç”¨å®éªŒ

```bash
# æ–¹æ³•1ï¼šæŸ¥çœ‹é…ç½®æ–‡ä»¶
cat configs/umc_MIntRec.py | grep "elif experiment_name"

# æ–¹æ³•2ï¼šæŸ¥çœ‹æ–‡æ¡£
cat ABLATION_EXPERIMENTS_README.md
```

### 2. é€‰æ‹©å®éªŒåç§°

ä¾‹å¦‚é€‰æ‹©ï¼š`no_dual_projection`

### 3. è¿è¡Œå®éªŒ

```bash
python run.py \
    --dataset MIntRec \
    --ablation_experiment no_dual_projection \
    --train \
    --save_results
```

### 4. æŸ¥çœ‹ç»“æœ

ç»“æœä¿å­˜åœ¨ï¼š
- `outputs/MIntRec/ablation_no_dual_projection/results_no_dual_projection.csv`

---

## ğŸ¯ æ¨èçš„å•å®éªŒè¿è¡Œæ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šå¿«é€Ÿæµ‹è¯•ï¼ˆ1æ¬¡è¿è¡Œï¼‰

```bash
python run.py \
    --dataset MIntRec \
    --ablation_experiment no_dual_projection \
    --seed 0 \
    --train \
    --save_results
```

### æ–¹æ¡ˆ2ï¼šæ ‡å‡†å®éªŒï¼ˆ5æ¬¡è¿è¡Œå–å¹³å‡ï¼‰

```bash
for seed in 0 1 2 3 4; do
    python run.py \
        --dataset MIntRec \
        --ablation_experiment no_dual_projection \
        --seed $seed \
        --train \
        --save_results \
        --results_file_name "results_no_dual_seed${seed}.csv"
done
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å®éªŒåç§°å¿…é¡»ä¸é…ç½®æ–‡ä»¶ä¸­çš„å®Œå…¨ä¸€è‡´**ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰
2. **å¦‚æœå®éªŒåç§°ä¸å­˜åœ¨ï¼Œä¼šä½¿ç”¨é»˜è®¤é…ç½®**ï¼ˆæ‰€æœ‰åˆ›æ–°ç‚¹å¯ç”¨ï¼‰
3. **å»ºè®®å…ˆæŸ¥çœ‹é…ç½®æ–‡ä»¶ç¡®è®¤å®éªŒæ˜¯å¦å­˜åœ¨**
4. **å¯ä»¥æ·»åŠ è‡ªå®šä¹‰å®éªŒ**ï¼ˆå‚è€ƒ `MIntRecæ¶ˆèå®éªŒä¿®æ”¹æŒ‡å—.md`ï¼‰

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `MIntRecæ¶ˆèå®éªŒä¿®æ”¹æŒ‡å—.md` - å¦‚ä½•æ·»åŠ æ–°çš„æ¶ˆèå®éªŒ
- `MIntRecæ¶ˆèå®éªŒæŒ‡å—.md` - è¯¦ç»†çš„æ¶ˆèå®éªŒæŒ‡å—
- `ABLATION_EXPERIMENTS_README.md` - æ¶ˆèå®éªŒè¯´æ˜æ–‡æ¡£
- `configs/umc_MIntRec.py` - é…ç½®æ–‡ä»¶ï¼ˆæŸ¥çœ‹å¯ç”¨å®éªŒï¼‰

---

## ğŸ¯ å¿«é€Ÿå‚è€ƒ

### æŸ¥çœ‹ä½ç½®
- âœ… **é…ç½®æ–‡ä»¶**ï¼š`configs/umc_MIntRec.py` ç¬¬ 147-209 è¡Œ
- âœ… **æ–‡æ¡£**ï¼š`ABLATION_EXPERIMENTS_README.md`
- âœ… **å¸®åŠ©ä¿¡æ¯**ï¼š`python run.py --help`

### é€‰æ‹©æ–¹å¼
- âœ… **å‘½ä»¤è¡Œå‚æ•°**ï¼š`--ablation_experiment <å®éªŒåç§°>`
- âœ… **å®éªŒåç§°**ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­æŸ¥æ‰¾ `elif experiment_name == '...'`

### è¿è¡Œæ–¹å¼
- âœ… **ä½¿ç”¨ run.py**ï¼š`python run.py --ablation_experiment <åç§°> --train`
- âœ… **ä½¿ç”¨ run_single_ablation.py**ï¼š`python run_single_ablation.py --experiment_name <åç§°>`

---

**æ€»ç»“**ï¼š
1. **æŸ¥çœ‹**ï¼šæ‰“å¼€ `configs/umc_MIntRec.py` ç¬¬ 147-209 è¡Œ
2. **é€‰æ‹©**ï¼šé€‰æ‹©ä¸€ä¸ª `elif experiment_name == '...'` ä¸­çš„å®éªŒåç§°
3. **è¿è¡Œ**ï¼šä½¿ç”¨ `--ablation_experiment <å®éªŒåç§°>` è¿è¡Œ








